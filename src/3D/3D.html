<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Salle 3D</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="../style.css">
    <script type="module" src="../customCursor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js" integrity="sha512-DkPsH9LzNzZaZjCszwKrooKwgjArJDiEjA5tTgr3YX4E6TYv93ICS8T41yFHJnnSmGpnf0Mvb5NhScYbwvhn2w==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TimelineMax.min.js" integrity="sha512-0xrMWUXzEAc+VY7k48pWd5YT6ig03p4KARKxs4Bqxb9atrcn2fV41fWs+YXTKb8lD2sbPAmZMjKENiyzM/Gagw==" crossorigin="anonymous"></script>
    <script type="module">
      import { roomInfos } from '../roomInfo.js';
      const params = new URLSearchParams(window.location.search);
      const roomKey = params.get("room");
      const room = roomInfos.find(info => info[0] === roomKey);
      const infos_rooms = document.querySelector('.title_rooms')
      const title_rooms = document.querySelector('.title_rooms h2')
      const text_info_room = document.getElementById('text_info_room')
      const close_infos_div = document.getElementById('close_infos_div')
      const informations_small = document.querySelector('.informations_small')
      const deepth_room = document.getElementById('deepth_room')
      const location_room = document.getElementById('location_room')
      const title_head = document.querySelector('head title')
    
      if (!room) {
        document.body.innerHTML = "<h1>Salle introuvable</h1>";
      } else {

        close_infos_div.addEventListener('click', ()=>{
          infos_rooms.style.right = '-20vw'
          informations_small.style.right = "-22px"

          setTimeout(()=>{
            informations_small.addEventListener('click', ()=>{
              informations_small.style.right = '-70px'; 
              infos_rooms.style.right = '3%'
            })
          }, 550)
        })

        title_rooms.innerHTML = `${room[1]}`;
        title_head.innerHTML = `${room[1]} - Catacombes Interdites de Paris`
        text_info_room.innerHTML = `${room[2]}`;
        deepth_room.innerHTML = `${room[4]}`;
        // location_room.innerHTML = `${room[3]}`;
        const address = room[3].replace(/\n/g, "<br>");
        location_room.innerHTML = `<br/><a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address)}" target="_blank">${address}</a>`;


        // Inject canvas
        const canvas = document.createElement("canvas");
        canvas.className = "canvas_rooms";
        document.body.appendChild(canvas);
    
        // Définir l’URL dans une variable globale
        window.MODEL_URL = `https://catacombes.xyz/${room[0]}/${room[0]}.glb`;
        
        console.log(room)

        //  https://catacombes.xyz/${NameRooms.roomInfos[roomNumber][0]}/AR
        
        // Injecter le script
        const script = document.createElement("script");
        script.type = "module";
        script.src = "./webgl.js";
        document.body.appendChild(script);
      }
    </script>
</head>
<body style="margin: 0; overflow: hidden; position: relative;">
    <label for="burger">
        <h1 title="Catacombes Interdites">Catacombes <span>  UNOFFICIAL</span></h1>
    </label>

    <input id="burger" type="checkbox" />

    <label for="burger" title="menu du site">
        <span></span>
        <span></span>
        <span></span>
    </label>

    <nav>    
        <ul>
            <li><a class="linkBurger" href="http://catacombes.xyz/" title="Retourner sur la page d'accueil de Catacombes Unofficial">Home</a></li>
            <li><a class="linkBurger" href="http://catacombes.xyz/displayRooms/" title="Affiche l'ensemble des salles des catacombes et leurs infos">Rooms</a></li>
            <li><a class="linkBurger" href="http://catacombes.xyz/Map/" title="Affiche les salles des catacombes sur une carte">Map</a></li>
            <li><a class="linkBurger" href="http://catacombes.xyz/Cards/" title="Aller vers la page qui affiche les tracts en realite virtuelle des catacombes interdites">Cards</a></li>
            <li class="iconeBurgerMenu">
                <!-- Git -->
                <!--
                <a href="https://github.com/PaulMarechal" target="_blank" id="iconeGit">
                    <svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
                    </svg>
                </a>
                -->

                <!-- Instagram -->
                <a href="https://www.instagram.com/v_ktas/?hl=fr" target="_blank" id="instagramDuvalIcon" title="Aller sur l'Insta de -V-">
                    <svg class="icon icon-tabler icon-tabler-brand-instagram" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="#000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"></path>
                        <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
                        <path d="M16.5 7.5l0 .01"></path>
                    </svg>
                </a>

                <!-- Site -->
                <a href="https://devxr.fr" target="_blank" id="iconeSite" title="Aller sur le side de DevXR.fr">
                    <svg class="icon icon-tabler icon-tabler-world-www" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4"></path>
                        <path d="M11.5 3a16.989 16.989 0 0 0 -1.826 4"></path>
                        <path d="M12.5 3a16.989 16.989 0 0 1 1.828 4"></path>
                        <path d="M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4"></path>
                        <path d="M11.5 21a16.989 16.989 0 0 1 -1.826 -4"></path>
                        <path d="M12.5 21a16.989 16.989 0 0 0 1.828 -4"></path>
                        <path d="M2 10l1 4l1.5 -4l1.5 4l1 -4"></path>
                        <path d="M17 10l1 4l1.5 -4l1.5 4l1 -4"></path>
                        <path d="M9.5 10l1 4l1.5 -4l1.5 4l1 -4"></path>
                    </svg>
                </a>

                <!-- Mail -->
                <a href="mailto:contact@paulmarechal.xyz" id="iconeMail" title="Pour me contacter par mail">
                    <svg class="icon icon-tabler icon-tabler-mail" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path class="linkedInApp" d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"></path>
                        <path class="linkedInApp" d="M3 7l9 6l9 -6"></path>
                    </svg>
                </a>

                <!-- LinkedIn -->
                <a href="https://www.linkedin.com/in/paul-marechal/" target="_blank" id="iconeLinkedin" title="Pour me contacter par LinkedIn">
                    <svg class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="border-radius: 5px">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path class="linkedInApp" d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"></path>
                        <path d="M8 11l0 5"></path>
                        <path d="M8 8l0 .01"></path>
                        <path d="M12 16l0 -5"></path>
                        <path d="M16 16v-3a2 2 0 0 0 -4 0"></path>
                    </svg>
                </a>
            </li>
        </ul>  
    </nav>

    <div class="loading-bar"></div>

    <button id="all_room_buttons" onclick="window.location.href='/displayRooms'">
        ← Retour à la carte
    </button>

    <div class="title_rooms">
        <h2 class="background_filter"></h2>
        <svg id="close_infos_div" title="Fermer" xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="red"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>
        <div class="deepth_div background_filter"> 
            <p>
                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-down-bar"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3v18" /><path d="M9 18l3 3l3 -3" /><path d="M9 3h6" /></svg>
                Profondeur :
                <span id='deepth_room'></span>
            </p>
            <p>
                <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-map-route"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13" /><path d="M9 12v.01" /><path d="M6 13v.01" /><path d="M17 15l-4 -4" /><path d="M13 15l4 -4" /></svg>
                Emplacement : 
                <span id="location_room"></span>
            </p>
        </div>

        <p id="text_info_room" class="background_filter"></p>
    </div>
    <div class="informations_small">
        <p>Infos</p>
    </div>
</body>
</html>
